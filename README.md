# Codes For Academic Needs Of MachineLearning

## 本文档包含信息：

● 组员信息：标明组长，组员的分工信息

● 作业题目和内容

● 作业环境：文件说明，函数说明，调用的函数库以及涉及哪些技术

● 难题与解决

● 总结

---

## 分工：

**组长：**

许文皓（编写实验一的主要部分代码，编写实验二、实验三的部分代码）

具体分工：

实验一：代码中数据清洗等主要部分，四道实验题的实现

实验二：

实验三：

**组员：**

陶希（编写实验一、实验三的部分代码，编写实验二的主要部分代码）

具体分工：

实验一：相关函数的编写，数据源文件的导入和整合

实验二：

实验三：

林明锋（编写实验一、实验二的部分代码，编写实验三的主要部分代码）

具体分工：

实验一：优化代码结构，数据的量化，清洗后数据文件的导出

实验二：

实验三：

---

## 作业包含内容题目：
**实验一    《多源数据集成、清洗和统计》**

**实验二    《数据统计和可视化》**

**实验三    《k-means聚类算法》**

---

## 实验作业环境、难题和解决及总结：

---

### 实验一：

#### 具体分工明细：

许文皓：代码中数据清洗等主要部分，四道实验题的实现

陶希：相关函数的编写，数据源文件的导入和整合

林明锋：优化代码结构，数据的量化，清洗后数据文件的导出

#### 实验说明：

实验一采用javaSE实现，其中还涉及java连接数据库技术（JDBC）和sql相关的使用

#### 项目结构说明：

实验代码已整合为一个可执行java文件置于 库/实验一/Codes文件夹中

代码运行结果和过程截图置于 库/实验一/RunResultPics 文件夹中

实验用到的或输出的数据文件置于 库/实验一/DataFiles 文件夹中

**使用语言版本：**Java 15.0.1

**运行的编译平台：**实测Eclipse及IDEA均可运行

**相关技术：**JavaSE、JDBC、SQL

**使用到的软件：**

Sqlyog：mysql数据库可视化界面

Navicat：手动将外部数据库导入mysql数据库表中

IntelliJ IDEA：实验一所用的编译平台

**使用（导入）的库（包）及说明：**

具体的库函数作用和使用范例见代码

1.java.io.*

本实验中该库主要提供相关的文件读写方法，相关的类有：File、FileWriter、BufferedWriter等

2.java.sql.*

本实验中该库主要提供JDBC相关的数据库操作方法，相关的类有Connection、Statement、PreparedStatement等

3.java.util.Scanner

Util包中的Scanner类用来快速遍历可迭代文本对象

编写的类：

为避免代码文件结构冗余，本实验中编写的类仅一个，所有操作均在该类中实现。

**相关全局变量：**

public static int stunum=0;

Stunum用来记录当前遍历的学生数据项的下标

**编写的函数：**

public static int propertiesIndex(String temp,String[] target)

该函数用来返回对应属性的下标

public static int findIndex()

该函数返回下一个学生数据项的下标

其余的代码部分或自成一块，或用花括号{...}表示成宏，具体细节已注释，详见代码

#### 关于代码&难题与解决：

1.本实验采用JDBC技术，这是因为实验要求对含大量有误数据的两个数据源文件进行清洗和合并，而结构化查询语言对数据的处理和优化较佳且使用SQL能够减少java项目的代码量，因此相关的操作使用SQL来实现是最合适、最简便的，如此还能减轻程序的运行负担。

2.使用JDBC的具体做法是，先将两个数据源文件内容悉数读入mysql数据库的某表中，通过执行大量模糊查询、删减和修改SQL语句来对表中的数据进行清洗，最后通过去重查询得到视图导出最终的txt文件。

3.数据集中会出现数据项的ID属性值重复、不连续的情况，本实验代码对此不作处理（因为ID项的各种处理方案均存在缺陷，具体见代码注释）。

4.在实现实验题过程中对于部分数据项存在属性值空缺的处理：这里默认视为0处理，另外还编写了不计空缺值（即空缺值不参与平均值等的运算）的代码块，详见代码注释。

5.属性值量化问题：由于数据源中的属性值有些是百分制，有些是十分制，且Constitution属性值类型为枚举的字符串，为方便计算，在实验题中将体育成绩按评价高低量化为百分制或四分制；在实现皮尔逊相关系数时将十分制属性值化为百分制，同时也将体育成绩按评价高低量化为百分制。

#### 总结：

本实验采用Java语言连接mysql数据库对数据进行清洗和导出，代码的数据清洗部分也通过执行大量sql语句来实现。为代码块优化问题和数据结构调整而前后进行过多次修正和重写。尽管耗时较长且错误频发，在经过小组间充分讨论和交流后都能将各种问题逐一解决。通过本次实验，我们小组各成员加深了对数据清洗的认识，丰富了团队协作的经验，获益匪浅。

---

### 实验二：

#### 具体分工明细：
许文皓：相关内部函数的编写，数据源文件的导入和整合
陶希：五题代码中可视化以及计算函数等主要部分的实现
林明锋：优化代码结构，数据的量化，数据文件的导出

#### 实验说明：
实验二采用python实现，其中主要涉及python各类可视化工具，文件读入模块的使用以及自主对规范化矩阵以及相关矩阵的计算与编写

#### 项目结构说明：
实验代码分为五个文件置于库/实验二/代码中
其中存放有py类型文件4个（题目1-题目5代码，题目4与题目5置于同一代码），以及一个ipynb文件（题目1可执行代码，在jupyter notebook上运行实现可视化）

代码运行结果截图置于 库/实验二/截图 文件夹中
存放有题目1，题目2，题目4的可视化运行结果截图

实验用到的或输出的数据文件置于 库/实验二/data文件夹中
存放为使用到的数据data3，题目3导出数据data4，题目5导出数据data5

**使用语言版本：**python 3.8

**运行的编译平台：**pycharm（用于编写）以及jupyter notebook（主要用于题目1可视化）

**相关技术：**python，jupyter notebook

**使用到的软件：**pycharm，jupyter notebook

**使用（导入）的库（包）及说明：**
具体的库函数作用和使用范例见代码

import pandas as pd	主要用于对外部数据以及内部数据集的操作
import random		用于随机数
import pyecharts.options as opts	用于散点图制作
from pyecharts.charts import Scatter	用于散点图制作
import matplotlib.pyplot as plt	用于直方图和热力图制作
import numpy as np	用于数据省略输出与数据合并
import seaborn	用于热力图制作
import math	引入数学方法用于开方


**编写的函数：**
代码中可视化部分主要调用库函数实现，主要编写的函数使用在题目3与题目4中
get_average(records)：用于计算平均值，参数records传入一个数组，返回为该数据平均值

get_variance(records)：用于计算协方差（或方差），参数records传入一个数组，内部调用get_average函数，返回为该数组的协方差

get_standard_deviation(records)：用于计算标准差，参数records传入一个数组，内部调用get_standard_deviation函数，对得到的方差进行开方，返回标准差

get_z_score(records)：用于得到规范化数据，参数为records传入一个数组，内部调用上述三个函数，返回为规范化后的数组

correlation(record1,record2)：用于得到两数组间的关系值，参数主要为两学生规范化后的数组数据，返回值为两学生的关系

对第五题提取的实现未编写入函数，故具体实现可见代码注释

#### 关于代码&难题与解决：
1.本实验主要部分为可视化以及对规范化矩阵与关系矩阵的计算与导出。因为涉及到大量的文件处理导入导出，故使用python编写可大大减轻这方面的代码数据量。这是因为python中存在有pandas和numpy等库可直接调用对数据进行处理。
2.对于可视化的部分，本实验中主要的可视化为散点图，直方图以及热力图。python在图像处理中存在有许多方法，故为了体现实验结果和代码类型多样化，在散点图中使用的可视化模块库为pyecharts，使用jupyter notebook将其可视化执行。在直方图和热力图中使用的可视化模块库主要为matplotlib.pyplot，可直接在pycharm中生成图表，其中热力图模块还需要引入seaborn。
3.在实验中由于需要对数据进行规范化以及计算每个学生之间的关系，而在得到的清洗后的数据中存在有字符型的值（如体育成绩）以及各成绩的分值不同的情况（如后面4门成绩为10分制），故需要对数据进行量化处理，在此处，对体育成绩根据其评级随机在一个区间中取值。对分制不同的情况，将数据均置为100分制。由于体育成绩为随机数，故在每次运行时可能存在部分结果不同的情况，属于正常现象。
4.根据老师在文档中给出的计算公式，得到上述自己编写函数部分的代码，对第四题中的get_variance函数中做出的一点修改。由于实验验算发现使用协方差开方时得到数据进行计算会产生偏差，即热力图中对角线上元素为0.9左右，与实际情况中关系矩阵中的对角线上元素情况不符合（由于对角线上元素为自身与自身的相关，故为1），故将此部分协方差计算改为方差（改为除以数组长度）。得到的结果相符（存在有0.005数值范围的数据浮动，这是因为有多位小数运算的结果产生的情况，属于正常现象）
5.对于题目5的查询问题来说，组内考虑到时间复杂度的问题，对比选择排序前三的数据以及调用函数对整体数据进行排序来看，使用有限次数的选择排序更优。故在此处对矩阵的每行数据进行前三次选择，找到最相关的三个同学，记录三人的脚标，再带入脚标至整体文件中查找三人的学号，再进行写入导出。此部分要注意的是要记得排除掉对角线上元素的值（此部分为本身）。

#### 总结：
本实验采用python对清洗后的数据进行文件的导入导出，数据的可视化以及数据的实际运用操作（如关系矩阵等）。代码中对于可视化的实现主要是引入使用的python自带的库函数。为了体现代码的多样性以及对python库中各类可视化函数的学习使用，在可视化部分使用多种不同库类型进行了可视化显示，小组也通过本次实验了解pycharm，jupyter notebook等各种编译运行可视化的软件的使用方法。在实验中对于计算函数的确定以及运算时间复杂度的衡量等问题，小组进行一系列讨论与交流并逐一得到解决。通过本次实验小组成员学习了对数据可视化的使用，加深了对规范化的计算以及关系矩阵的得出方法，丰富了团队合作的经验，受益匪浅。
